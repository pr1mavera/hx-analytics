{"version":3,"file":"hx-analytics-jssdk.js","sources":["../../packages/jssdk/events/tstest.js","../../packages/utils/index.js","../../packages/jssdk/entry.js"],"sourcesContent":["export function sayHello(name) {\n    return \"Hello from tstest \" + name;\n}\n","var _ = function () { };\n_.inIframe = function () { return window && window.self === window.top; };\n_.createVisitId = function (appId) {\n    return ''\n        // 应用id\n        + appId\n        // 当前访问时间（到秒）\n        + this.formatDate('yyyy-MM-dd-hh-mm-ss').split(/-/g).join('')\n        // 6位随机数\n        + this.randomInRange(100000, 999999);\n};\n_.formatDate = function (format, date) {\n    if (date === void 0) { date = new Date(); }\n    var map = {\n        'M': date.getMonth() + 1,\n        'd': date.getDate(),\n        'h': date.getHours(),\n        'm': date.getMinutes(),\n        's': date.getSeconds(),\n        'q': Math.floor((date.getMonth() + 3) / 3) // 季度\n    };\n    format = format.replace(/([yMdhmsqS])+/g, function (all, t) {\n        var v = map[t];\n        if (v !== void 0) {\n            if (all.length > 1) {\n                v = '0' + v;\n                v = v.substr(v.length - 2);\n            }\n            return v;\n        }\n        else if (t === 'y') {\n            return (date.getFullYear() + '').substr(4 - all.length);\n        }\n        else if (t === 'S') {\n            var ms = \"00\" + date.getMilliseconds();\n            return ms.substr(ms.length - 3);\n        }\n        return all;\n    });\n    return format;\n};\n_.randomInRange = function (min, max) { return Math.floor(Math.random() * (max - min) + min); };\nexport default _;\n","import { sayHello } from './events/tstest';\nimport _ from '../utils';\nvar visit = _.createVisitId('SPKF');\nconsole.log('访客码： ', visit);\n// 初始化 -> 校验签名是否合法\n//     非法 -> mode: none\n//     合法 -> 判断当前环境 app / iframe\n//         app -> 是否 B/A\n//             是 -> mode: report\n//             否 -> mode: none\n//         iframe -> 校验 iframe 来源是否有效\n//             有效 -> mode: catch\n//             无效 -> mode: none\n// ha 需要提供的 API :\n// 初始化 init | public\n// 行为事件主动上报 push | public\n// 上报统一入口 _report | private\n// 模式切换 _changeMode | private\nconsole.log(sayHello('1234'));\nvar HXAnalytics = /** @class */ (function () {\n    function HXAnalytics(config) {\n    }\n    HXAnalytics.prototype._report = function () {\n    };\n    HXAnalytics.prototype._changeMode = function () {\n    };\n    HXAnalytics.prototype.init = function () {\n        return this;\n    };\n    HXAnalytics.prototype.push = function () {\n    };\n    return HXAnalytics;\n}());\nvar ha = new HXAnalytics();\nexport default ha;\n"],"names":["sayHello","name","_","inIframe","window","self","top","createVisitId","appId","formatDate","split","join","randomInRange","format","date","Date","map","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","replace","all","t","v","length","substr","getFullYear","ms","getMilliseconds","min","max","random","visit","console","log","HXAnalytics","config","prototype","_report","_changeMode","init","push","ha"],"mappings":"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"}